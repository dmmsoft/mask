<html><head><style id="custom-theme">body{font-size:16px;line-height:1.5em;color:#444;font-family:"helvetica neue",tahoma,"hiragino sans gb",stheiti,"wenquanyi micro hei",\5FAE\8F6F\96C5\9ED1,\5B8B\4F53,sans-serif;}
body{margin:30px;}
a{text-decoration:none;}
p{margin:0 0 1em 0;}
img{max-width:100%;}
h1,h2,h3,h4,h5,h6{font-weight:normal;color:#111;line-height:1em;margin:1em 0 15px 0;}
h4,h5,h6{font-weight:bold;}
h1{font-size:2.5em;border-bottom:1px solid silver;padding-bottom:.3em;}
h2{font-size:2em;border-bottom:1px solid silver;padding-bottom:.3em;}
h3{font-size:1.5em;}
h4{font-size:1.2em;}
h5{font-size:1em;}
h6{font-size:0.9em;}
blockquote{color:#666666;margin:0;padding-left:1em;border-left:0.5em #EEE solid;}
hr{display:block;height:2px;border:0;border-top:1px solid #aaa;border-bottom:1px solid #eee;margin:1em 0;padding:0;}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}
sup{top:-0.5em;}
sub{bottom:-0.25em;}
ul,ol{margin:1em 0;padding:0 0 0 2em;}
li p:last-child{margin:0}
dd{margin:0 0 0 2em;}
img{border:0;-ms-interpolation-mode:bicubic;vertical-align:middle;}
table{border-collapse:collapse;border-spacing:0;margin-bottom:1em;}
td,th{padding:4px 10px;border:1px solid #bbb;}
tr:nth-child(even) td,tr:nth-child(even) th{background:#eee;}

pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word;border:1px solid #CCC!important;background-color:#F8F8F8;color:#000;}
pre code{display:block;line-height:1.5em;padding:10px;font-size:12px;font-family:\5FAE\8F6F\96C5\9ED1,\5B8B\4F53,sans-serif;}
pre .decorator,pre .annotation{color:#000077;}
pre .attribute{color:#070;}
pre .value,pre .string,pre .scss .value .string{color:#d14;}
pre .comment{color:#998;font-style:italic;}
pre .function .title{color:#900;}
pre .class{color:#458;}
pre .id,pre .pseudo,pre .constant,pre .hexcolor{color:teal;}
pre .variable{color:#336699;}
pre .javadoc{color:#997700;}
pre .pi,pre .doctype{color:#3344bb;}
pre .number{color:#099;}
pre .important{color:#f00;}
pre .label{color:#970;}
pre .preprocessor{color:#579;}
pre .reserved,pre .keyword,pre .scss .value{color:#000;}
pre .regexp{background-color:#fff0ff;color:#880088;}
pre .symbol{color:#990073;}
pre .symbol .string{color:#a60;}
pre .tag{color:#007700;}
pre .at_rule,pre .at_rule .keyword{color:#088;}
pre .at_rule .preprocessor{color:#808;}
pre .scss .tag,pre .scss .attribute{color:#339;}</style></head><body youdao="bind"><h1 id="mask-js">mask.js</h1>
<p><img src="https://img.shields.io/travis/joyent/node/v0.6.svg" alt="Travis branch"> <img src="https://img.shields.io/gemnasium/mathiasbynens/he.svg?style=flat" alt="Gemnasium"> <img src="https://img.shields.io/apm/l/vim-mode.svg?style=flat" alt="apm"></p>
<p>mask.js是一个基于canvas的移动端刮刮卡插件，支持图片和颜色两种填充方式，同时提供自动消抹，自定义涂抹笔触等功能。</p>
<h2 id="-">快速使用</h2>
<p>使用之前必须先引用这个脚本 然后</p>
<pre><code class="lang-javascript"><span class="title">new</span> mask(target,config);
</code></pre>
<ul>
<li>target：要初始化成刮刮卡的目标canvas元素，不可为空 <br></li>
<li>config：配置对象【config可以为空 为空的话使用默认值】</li>
</ul>
<pre><code class="lang-javascript"><span class="keyword">new</span> mask(document.querySelector(<span class="string">"canvas"</span>),{
    fillStyle: <span class="string">"image"</span>,
    fillContent: <span class="string">"./img/mask.jpg"</span>,
    percent: <span class="string">"50"</span>,
    radius: <span class="string">"30"</span>,
    disable: <span class="literal">false</span>,
    touchstart: <span class="keyword">function</span>(e) {
        console.log(<span class="string">"手指按下"</span>);
        console.log(e);
    },
    touchmove: <span class="keyword">function</span>(e) {
        console.log(<span class="string">"手指移动"</span>);
        console.log(e);
    },
    touchend: <span class="keyword">function</span>(e) {
        console.log(<span class="string">"手指离开"</span>);
        console.log(e);
    },
    complete: <span class="keyword">function</span>() {
        console.log(<span class="string">"刮完了"</span>);
    },
    inited: <span class="keyword">function</span>() {
        console.log(<span class="string">"mask初始化完成"</span>);
    }
});
</code></pre>
<p><strong>其他拓展功能请参考<a href="index.html">【DEMO】</a></strong></p>
<h2 id="api">API</h2>
<h3 id="-config">自定义配置config</h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>fillStyle</td>
<td>填充的方式 支持两种 color &amp; image</td>
<td>color</td>
</tr>
<tr>
<td>fillContent</td>
<td>根据fillStyle填充内容<br>fillStyle=color则填颜色值<br>fillStyle=image则填图片地址或base64代码</td>
<td>#cccccc</td>
</tr>
<tr>
<td>percent</td>
<td>涂抹了xx%后自动抹去 【接受0%-100%之间的数值 百分号%可省略】</td>
<td>100</td>
</tr>
<tr>
<td>radius</td>
<td>涂抹笔触的半径【单位是px px可省略】</td>
<td>15</td>
</tr>
<tr>
<td>disable</td>
<td>是否封锁 默认不封锁</td>
<td>false</td>
</tr>
<tr>
<td>touchstart</td>
<td>手指按下的时候执行函数</td>
<td>function(){}</td>
</tr>
<tr>
<td>touchmove</td>
<td>手指移动的时候执行函数</td>
<td>function(){}</td>
</tr>
<tr>
<td>touchend</td>
<td>手指离开的时候执行函数</td>
<td>function(){}</td>
</tr>
<tr>
<td>complete</td>
<td>刮完时【刮到指定百分比之后】执行函数</td>
<td>function(){}</td>
</tr>
<tr>
<td>inited</td>
<td>函数初始化之后执行函数</td>
<td>function(){}</td>
</tr>
</tbody>
</table>
<h3 id="-">函数方法</h3>
<ul>
<li>clear() 自动刮完</li>
<li>disable() 封锁刮刮卡</li>
<li>enable() 解锁刮刮卡</li>
<li>changeConfig(config) 更改配置项【传入自定义config对象 实时生效】【亦可实现disable()和enable()功能】</li>
<li>init() 重新初始化【可配合changeConfig(config)使用】</li>
</ul>
<h2 id="-">常见问题</h2>
<h3 id="-fillcontent-">注意fillContent图片跨域</h3>
<p>因为canvas中的getImageData方法不支持跨域，所以当参数fillStyle=image时，fillContent填的图片地址必须与主文件同域，否则程序会把自动涂抹功能改为刮了【percent/10】次之后自动抹去。</p>
<p>如果图片不得不跨域，则考虑以下两种解决方案</p>
<ul>
<li>通过一个自定义接口，把图片转换成base64编码后再引用</li>
<li>从网络层面设置图片服务器的响应头 Access-Control-Allow-Origin:*</li>
</ul>
</body></html>