(function(c,b){if(c.mask){return}function a(f,e){if(!f){return}var d={fillStyle:"color",fillContent:"#cccccc",percent:"100",radius:"15",disable:false,touchstart:function(){},touchmove:function(){},touchend:function(){},complete:function(){},inited:function(){}};e=e||{};this.config=this.extend(e,d,false);this.target=f;this.ctx=this.target.getContext("2d");this.w=this.target.clientWidth;this.h=this.target.clientHeight;this.init()}a.prototype={changeConfig:function(e){var f=this;for(var d in e){f.config[d]=e[d]}},disable:function(){var d=this;d.changeConfig({disable:true})},enable:function(){var d=this;d.changeConfig({disable:false})},clear:function(){var d=this;d.target.style.webkitTransitionDuration="500ms";d.target.style.MozTransitionDuration="500ms";d.target.style.msTransitionDuration="500ms";d.target.style.OTransitionDuration="500ms";d.target.style.transitionDuration="500ms";d.target.style.opacity=0;setTimeout(function(){d.ctx.clearRect(0,0,d.w,d.h);d.target.style.webkitTransitionDuration="0ms";d.target.style.MozTransitionDuration="0ms";d.target.style.msTransitionDuration="0ms";d.target.style.OTransitionDuration="0ms";d.target.style.transitionDuration="0ms";d.target.style.opacity=1},500)},init:function(){var m=this;var f=m.config;var n=m.target;var t=m.ctx;var s=m.w;var l=m.h;var d=false;n.width=s;n.height=l;n.style.backgroundColor="#ffffff";if(f.fillStyle=="color"){t.fillStyle=f.fillContent;t.fillRect(0,0,s,l);t.globalCompositeOperation="destination-out";n.style.backgroundColor="transparent";f.inited&&f.inited()}else{if(f.fillStyle=="image"){r(f.fillContent,function(){t.drawImage(this,0,0,s,l);t.globalCompositeOperation="destination-out";n.style.backgroundColor="transparent";f.inited&&f.inited()})}else{return false}}var q="ontouchstart" in c?true:false;var e=q?"touchstart":"mousedown";var i=q?"touchmove":"mousemove";var g=q?"touchend":"mouseup";n.addEventListener(e,j);n.addEventListener(g,k);n.addEventListener(i,o);function r(u,v){var h=new Image();h.src=u;if(h.complete){v.call(h);return}h.onload=function(){v.call(h)}}function j(h){h.preventDefault();if(f.disable){return false}if(h.changedTouches){h=h.changedTouches[h.changedTouches.length-1]}d=true;f.touchstart&&f.touchstart(h)}var p=1;function k(y){y.preventDefault();if(f.disable){return false}if(y.changedTouches){y=y.changedTouches[y.changedTouches.length-1]}d=false;f.touchend&&f.touchend(y);try{var x=t.getImageData(0,0,s,l).data;var w=0;for(var h=0;h<x.length;h+=4){if(x[h+3]==0){w++}}var v=parseInt(f.percent)/100;if(w>=s*l*v){m.clear();f.complete&&f.complete()}}catch(u){var v=parseInt(f.percent)/10;p++;if(p>v){m.clear();f.complete&&f.complete()}}}function o(v){v.preventDefault();if(f.disable){return false}if(d){if(v.changedTouches){v=v.changedTouches[v.changedTouches.length-1]}var u=n.getBoundingClientRect().left;var z=n.getBoundingClientRect().top;var h=v.clientX-u;var w=v.clientY-z;t.beginPath();t.arc(h,w,parseInt(f.radius),0,Math.PI*2);t.fill();f.touchmove&&f.touchmove(v)}}},extend:function(d,h,f,e){if(f===undefined){f=true}for(var g in h){if(f||!(g in d)){if(e){e(g)}else{d[g]=h[g]}}}return d}};c.mask=a})(window,document);